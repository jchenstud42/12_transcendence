<!DOCTYPE html>
<html lang="en" class="m-0 p-0">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" type="image/x-icon" href="./assets/favicon.ico">
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" href="/styles.css">

	<title>Transcendence</title>

	<style>
		:root {
			--game-width: 800px;
			--game-height: 600px;
			--paddle-width: 10px;
			--paddle-height: 100px;
			--ball-size: 10px;
		}

		.play-btn {
			width: calc(var(--game-width) * 0.2);
			height: calc(var(--game-height) * 0.1);
		}

		.quick-match-btn {
			width: calc(var(--game-width) * 0.25);
			height: calc(var(--game-height) * 0.1);
		}

		.tournament-btn {
			width: calc(var(--game-width) * 0.25);
			height: calc(var(--game-height) * 0.1);
		}

		.triangle-right {
			width: 0;
			height: 0;
			border-top: calc(var(--game-height) * 0.05) solid transparent;
			border-bottom: calc(var(--game-height) * 0.05) solid transparent;
			border-left: calc(var(--game-width) * 0.05) solid white;
		}

		.triangle-left {
			width: 0;
			height: 0;
			border-top: calc(var(--game-height) * 0.05) solid transparent;
			border-bottom: calc(var(--game-height) * 0.05) solid transparent;
			border-right: calc(var(--game-width) * 0.05) solid white;
		}

		.player-name-item {
			background-color: #374151;
			color: #ff4d4d;
			/* pink */
			font-size: 15px;
			/* about text-2xl */
			font-weight: 700;
			/* bold */
			font-family: "Courier New", monospace;
			padding: 4px 12px;
			border-radius: 8px;
			width: calc(var(--game-width) * 0.2);
		}
	</style>
</head>

<!-- MODULE DESTINATION 2FA -->
<div id="destination-modal" class="hidden fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50">
	<div class="bg-white p-6 rounded shadow-lg w-80">
		<h2 id="destination-title" class="text-xl font-bold mb-4"></h2>

		<input id="destination-input" type="text" class="w-full border px-3 py-2 rounded mb-4" placeholder="" />

		<div class="flex justify-end gap-2">
			<button id="destination-cancel" class="px-3 py-1 bg-gray-300 rounded">Annuler</button>
			<button id="destination-confirm" class="px-3 py-1 bg-blue-500 text-white rounded">Valider</button>
		</div>
	</div>
</div>

<body id="page" class="relative min-h-screen overflow-x-hidden m-0 p-0">
	<img src="./assets/b5.jpeg" alt="Background" class="absolute inset-0 w-full h-full object-cover object-center z-0" />

	<div class="absolute top-4 right-4 z-10">
		<!--register & login button-->
		<div class="flex justify-end space-x-4 mb-2">
			<button id="register-button" class="bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline font-climate" type="button" data-i18n="register">
				Register
			</button>
			<button id="login-button" class="bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="button" data-i18n="login">
				Login
			</button>
			<button id="language-button" class="bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="button" data-i18n="language">
				Language
			</button>
		</div>
		<!--Profile button + quelques options-->
		<div id="profile-container" class="relative">
			<button id="profile-button" class=" hidden flex items-center space-x-2 bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
				<img id="profile-avatar" src="./assets/default-avatar.png" alt="Avatar" class="w-10 h-10 rounded-full">
			</button>
			<div id="profile-menu" class="hidden absolute right-0 mt-2 w-64 bg-white rounded shadow-lg z-50">
				<div class="p-4">
					<p class="font-bold text-lg" id="menu-username">TEST</p>
					<p class="text-sm text-gray-500" id="menu-email">TEST@test.com</p>
				</div>
				<hr>
				<div class="p-4 space-y-2">

					<button id="edit-profile-button" class="w-full text-left hover:bg-gray-100 px-2 py-1 rounded">Edit</button>
					<!-- EDIT PROFILE MENU -->
					<div id="edit-profile-menu" class="hidden fixed top-40 right-[280px] w-80 bg-white shadow-lg rounded p-4 z-50">
						<h2 class="text-xl font-bold mb-4" data-i18n="edit_profile">Edit Profile</h2>

						<!-- USERNAME -->
						<label class="font-semibold" data-i18n="username">Username</label>
						<input id="edit-username" class="border rounded w-full p-2 mb-3" type="text" data-i18n="new_username" placeholder="New username">

						<!-- EMAIL -->
						<label class="font-semibold" data-i18n="email">Email</label>
						<input id="edit-email" class="border rounded w-full p-2 mb-3" type="email" data-i18n="new_email" placeholder="New email">

						<!-- AVATAR -->
						<label class="font-semibold" data-i18n="avatar">Avatar</label>
						<input id="edit-avatar" class="border rounded w-full p-2 mb-3" type="text" data-i18n="new_avatar" placeholder="URL de l'avatar">
						<!-- PASSWORD -->
						<label class="font-semibold" data-i18n="new_Password">New Password</label>
						<input id="edit-password" class="border rounded w-full p-2 mb-3" type="text" data-i18n="new_password" placeholder="New password">
						<!--remplacer text par password quand ce sera fini-->

						<label class="font-semibold" data-i18n="confirm_password">Confirm Password</label>
						<input id="edit-password-confirm" class="border rounded w-full p-2 mb-3" type="text" data-i18n="confirm_password" placeholder="Confirm password">
						<!--remplacer text par password quand ce sera finit-->

						<button id="btn-save-profile" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded w-full mt-2" data-i18n="save_changes">
							Save changes
						</button>
					</div>

					<button id="friends-button" class="w-full text-left hover:bg-gray-100 px-2 py-1 rounded" data-i18n="friends">Friends</button>
					<!-- FRIENDS MENU -->
					<div id="friends-menu" class="hidden fixed top-40 right-[280px] w-80 bg-white shadow-lg rounded p-4 z-50">
						<div class="py-1">
							<button id="btn-add-friend" class="menu-item block hover:bg-gray-100 px-4 py-2 text-sm w-full text-left" data-i18n="add_friend">‚ûïAdd friends</button>
							<button id="btn-your-friends" class="menu-item block hover:bg-gray-100 px-4 py-2 text-sm w-full text-left" data-i18n="your_friends">üë• Your friends</button>
							<button id="btn-pending-friends" class="menu-item block hover:bg-gray-100 px-4 py-2 text-sm w-full text-left" data-i18n="pending_friends">‚è≥ Pending friends</button>
						</div>
					</div>

					<button id="history-button" class="w-full text-left hover:bg-gray-100 px-2 py-1 rounded" data-i18n="match_history">Match History</button>
					<!-- HISTORY MENU -->
					<div id="history-menu" class="hidden fixed top-40 right-[280px] w-80 bg-white shadow-lg rounded p-4 z-50">
						<h2 class="text-xl font-bold mb-2" data-i18n="match_history">Match History</h2>
						<p>Test match</p>
					</div>

					<!--2FA MENU-->
					<button id="2FA-button" class="w-full text-left hover:bg-gray-300 px-2 py-1">
						2FA
					</button>


					<div id="2fa-menu" class="hidden fixed top-40 right-[280px] w-80 bg-white shadow-lg rounded p-4 z-50">
						<h2 class="text-xl font-bold mb-2" data-i18n="two_factor_authentication">Two-Factor
							Authentication</h2>
						<p id="2fa-status-text" class="text-gray-600 mb-4" data-i18n="disable_2fa">2FA is disabled.</p>
						<button id="2fa-toggle-btn" class="w-full bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded" data-i18n="enable_2fa">
							Enable
						</button>
					</div>

					<!-- CHOIX 2FA TYPE -->
					<div id="2fa-type-menu" class="hidden fixed top-[300px] right-[280px] w-80 bg-white shadow-lg rounded p-4 z-50">
						<h2 class="text-xl font-bold mb-4" data-i18n="choose_2fa_type">Choose 2FA Type</h2>

						<button id="2fa-email" class="w-full bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded mb-2">
							Email
						</button>

						<button id="2fa-sms" class="w-full bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-2 rounded mb-2">
							SMS
						</button>

						<button id="2fa-qr" class="w-full bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded">
							QR Code (Google Authenticator)
						</button>
					</div>
					<button id="logout-button" class="w-full text-left hover:bg-gray-100 px-2 py-1 rounded text-red-500">Logout</button>
				</div>
			</div>

			<!-- Formulaire 2FA -->
			<form id="twofa-form" class="hidden">
				<h2 data-i18n="two_factor_authentication">Two-Factor Authentication</h2>
				<div id="qr-container"></div>
				<label for="twofa-code" data-i18n="enter_2fa">Enter your 2FA code:</label>
				<input type="text" id="twofa-code" maxlength="6" required />
				<button type="submit" data-i18n="verify">Verify</button>
			</form>

			<div class="absolute right-0">
				<!--Register form-->
				<!-- Pitier mettez pas action = submit, et changez pas les id register_form et login_form merci-->
				<div id="register-form" class="hidden absolute right-0 mt-2 w-64 bg-white rounded shadow-lg z-50">
					<form id="register_form" class="bg-white shadow-md rounded px-8 pt-6 pb-8">
						<label for="name" data-i18n="username">Username :</label><br>
						<input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="text" name="name" id="username" data-i18n="username" placeholder="Username" required><br><br>
						<label for="name" data-i18n="email">Email :</label><br>
						<input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="text" name="name" id="email" data-i18n="email" placeholder="Email" required><br><br>
						<label for="name" data-i18n="password">Password :</label><br>
						<input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="text" name="name" id="password" data-i18n="password" placeholder="Password" required><br><br>
						<label for="name" data-i18n="confirm_password">Confirm Password :</label><br>
						<input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="text" name="name" id="confirm-password" data-i18n="confirm_password" placeholder="Confirm Password" required><br><br>
						<button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="submit" data-i18n="register">register</button>
					</form>
				</div>
				<!--Login form-->
				<div id="login-form" class="hidden absolute right-0 mt-2 w-64 bg-white rounded shadow-lg z-50">
					<form id="login_form" class="bg-white shadow-md rounded px-8 pt-6 pb-8">
						<label for="name" data-i18n="username">Username :</label><br>
						<input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="text" name="name" id="login-id" data-i18n="username" placeholder="Login-ID" required><br><br>
						<label for="name" data-i18n="password">Password :</label><br>
						<input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="text" name="name" id="login-password" data-i18n="password" placeholder="Login-Password" required><br><br>
						<button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="submit" data-i18n="login">login</button>
					</form>
					<button id="oauth-42-button" class="btn-42">Sign in with 42</button>
				</div>
				<!--Language Selection Menu-->
				<div id="language-menu" class="hidden absolute right-0 mt-2 w-64 bg-white rounded shadow-lg z-50">
					<dropdown class="flex flex-col p-2 space-y-2">
						<button class="en hover:bg-gray-100 px-2 py-1 rounded w-full text-left" data-i18n="english">English
							üá¨üáß</button>
						<button class="fr hover:bg-gray-100 px-2 py-1 rounded w-full text-left" data-i18n="french">Fran√ßais
							üá´üá∑</button>
						<button class="es hover:bg-gray-100 px-2 py-1 rounded w-full text-left" data-i18n="spanish">Espa√±ol
							üá™üá¶</button>
					</dropdown>
				</div>
			</div>
		</div>

		<div id="pong-menu" class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-black overflow-hidden" style="width: var(--game-width); height: var(--game-height);">

			<!-- AI View Checkbox -->
			<label id="ai-view-label" class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex items-center cursor-pointer gap-2 hidden">
				<input 
					type="checkbox" 
					id="ai-view-checkbox"
					class="appearance-none w-5 h-5 border-2 border-gray-300 rounded 
					checked:bg-blue-500 checked:border-blue-500 
					focus:outline-none focus:ring-2 focus:ring-blue-400
					transition-colors duration-200"
				>
				<span class="text-white font-bold text-base" data-i18n="ai_view">Ai View</span>
			</label>

			<canvas id="canvas-AI-views" class="hidden" style="width: var(--game-width); height: var(--game-height);"></canvas>

			<!-- Play Buttons + Choose the type of match (Quick or Tournament Button)-->
			<button id="pong-button" class="play-btn bg-white text-black font-bold rounded-lg shadow-md hover:bg-gray-200" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
				PONG
			</button>

			<button id="quick-match-button" class="quick-match-btn bg-white text-black font-bold rounded-lg shadow-md hover:bg-gray-200 hidden" style="position: absolute; top: 50%; left: 33%; transform: translate(-50%, -50%);" data-i18n="quick_match">
				QUICK
				MATCH
			</button>

			<button id="tournament-button" class="tournament-btn bg-white text-black font-bold rounded-lg shadow-md hover:bg-gray-200 hidden" style="position: absolute; top: 50%; left: 66%; transform: translate(-50%, -50%);" data-i18n="tournament">
				TOURNAMENT
			</button>

			<!-- Select Number of Player: Counter Player + two triangle button + OK button-->
			<!-- Select Number of Player: Counter Player + two triangle button + OK button-->
			<h1 id="enterPlayerNbr-text" class="absolute text-center text-white text-2xl font-bold tracking-widest hidden" style="top: 30%; left: 50%; transform: translate(-50%, -50%);" data-i18n="how_many_players">How many
				Player(s):</h1>

			<h2 id="playerNbr-text" class="absolute text-white text-6xl font-bold tracking-widest hidden" style="top: 50%; left: 50%; transform: translate(-50%, -50%);">2</h2>


			<div id="ai-counter" class="absolute text-center text-white font-bold tracking-widest hidden" style="top: 50%; left: 75%; transform: translate(-50%, -50%);">

				<div class="text-xs">AI</div>
				<div id="aiNbr-text" class="text-xl">0</div>
			</div>

			<div id="decreasePlayer-button" class="triangle-left absolute shadow-md hidden" style="right: 60%; top: 47%">
			</div>

			<div id="increasePlayer-button" class="triangle-right absolute shadow-md hidden" style="right: 36%; top: 47%">
			</div>

			<button id="OK-button" class="play-btn bg-white text-black font-bold rounded-lg shadow-md hover:bg-gray-200 hidden" style="position: absolute; top: 70%; left: 50%; transform: translate(-50%, -50%);">
				OK
			</button>

			<!-- Enter Player Names: Label + Input + Button -->
			<div id="playerName-container" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-4 hidden">

				<label for="player-name-input" class="text-white text-xl font-bold" data-i18n="enter_player_name">
					Enter player name:
				</label>
				<input id="playerName-input" type="text" maxlength="8" class="text-center text-black text-xl font-bold px-3 py-2 rounded bg-white w-48">
			</div>

			<div id="players-area" class="absolute top-3/4 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 hidden">
				<div id="players-list" class="flex flex-row gap-2 text-white text-lg">
				</div>

				<div id="scores" class="mt-1 flex flex-row items-center gap-8 text-white text-2xl opacity-80 select-none pointer-events-none">
					<div id="score-left" class="min-w-[2ch] text-center">
						0
					</div>

					<div id="score-right" class="min-w-[2ch] text-center">
						0
					</div>
				</div>
			</div>

			<div id="final-list" class="absolute top-1/2 left-1/2 -translate-x-1/2 flex flex-row gap-32 text-white text-lg hidden">
			</div>

			<div id="winner-name" class="absolute top-1/4 left-1/2 -translate-x-1/2 flex flex-row gap-4 text-white text-lg hidden">
			</div>

			<img id="crown-image" src="assets/crown.png" alt="Crown" class="absolute top-10 left-1/2 -translate-x-1/2 w-16 h-16 hidden" />

			<button id="play-button" class="play-btn bg-white text-black font-bold rounded-lg shadow-md hover:bg-gray-200 hidden" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);" data-i18n="play">
				PLAY
			</button>

			<div id="ready-text" class="absolute text-white font-bold text-lg text-6xl hidden" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);" data-i18n="ready">
				READY ?
			</div>

			<div id="go-text" class="absolute text-white font-bold text-lg text-6xl hidden" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
				GOOOO !!!
			</div>

			<!-- Pong Elements (Paddle, ball...)-->

			<div id="left-paddle" class="absolute bg-white hidden" style="width: var(--paddle-width); height: var(--paddle-height); left: 5%; top: 40%;">
			</div>

			<div id="right-paddle" class="absolute bg-white hidden" style="width: var(--paddle-width); height: var(--paddle-height); right: 5%; top: 40%">
			</div>

			<div id="ball" class="absolute bg-white rounded hidden" style="width: var(--ball-size); height: var(--ball-size); left: 50%; top:50%">
			</div>

			<div id="AIview" class="absolute bg-blue-500 rounded hidden" style="width: var(--ball-size); height: var(--ball-size); left: 50%; top:50%">
			</div>

			<div id="AIbounceView" class="absolute bg-green-500 rounded hidden" style="width: var(--ball-size); height: var(--ball-size); left: 50%; top:50%">
			</div>

			<div id="AInextView" class="absolute bg-red-500 rounded hidden" style="width: var(--ball-size); height: var(--ball-size); left: 50%; top:50%">
			</div>
		</div>
</body>
<script type="module" src="/js/main.js"></script>

</html>
